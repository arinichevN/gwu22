
UDP шлюз для DHT22
По запросу клиента читает температуру с датчика и передает этому клиенту результат.
Количество подключаемых датчиков не ограничивается программой.

1 Установка
1.1 Требования
Скрипт-установщик(build.sh) работает  в командной оболочке bash.
1.2 Настройка перед установкой:
- место установки исполняемого файла: файл build.sh константа INST_DIR
- место установки файла конфигурации: файл build.sh константа CONF_DIR (должна соответствовать CONF_DIR из main.h)
- см. ./lib/gpio/README
1.3 Команды для установки:
cd gwu22
Полная установка:
sudo ./build.sh full
Полная установка, не затрагивая конфигурационных файлов:
sudo ./build.sh full_nc
Для тестирования (файлы не копируются за пределы текущей папки):
sudo ./build.sh part_debug

2 Настройка после установки:
Общие настройки демон читает из файла CONF_MAIN_FILE (main.h),
 где
 port - порт (должен быть уникальным в рамках хоста);
 retry_count - число попыток чтения с датчика при неудаче.
Настройки для датчиков демон читает из файла CONF_DEVICE_FILE (main.h):
 где
 pin - физический номер порта к которому подключен датчик DHT22;
 temp_id - уникальный номер датчика температуры (выбирается произвольно, 
 в дальнейшем, по нему можно будет получить значение температуры с датчика на данном порте);
 hum_id - уникальный номер датчика влажности (выбирается произвольно, 
 в дальнейшем, по нему можно будет получить значение влажности с датчика на данном порте);
Настройки для коррекции измерений демон читает из файла CONF_LCORRECTION_FILE (main.h):
 id - идентификатор набора параметров (целое число; задается произвольно; нельзя повторять);
 factor - коэффициент;
 delta - приращение.
Настройка привязки коррекции измерений к каналам находится в файле CONF_MOD_MAPPING_FILE (main.h):
 net_id - ссылка на temp_id или hum_id из CONF_DEVICE_FILE;
 lcorrection_id - идентификатор набора параметров из файла настройки коррекции измерений (CONF_LCORRECTION_FILE).
если net_id повторяется, то будет использована последняя строка с повторяющимся net_id.
3 Запуск
При полной установке запускается автоматически, вмести с операционной системой.
sudo gwu22
В режиме отладки (не отключается от терминала и выдает сообщения):
sudo gwu22_dbg
Если приложение установлено для тестирования:
sudo ./gwu22_dbg

4 Управление
4.1 Список команд
см. ./util.c printHelp()

4.2 Графический интерфейс пользователя
для чтения результатов измерений:
https://github.com/arinichevN/monitor_cl 
для отправки общих для всех демонов команд:
https://github.com/arinichevN/app_cl

4.3 Примеры
Для рассылки udp пакетов используется утилита udpcl (https://github.com/arinichevN/udpcl)
Утилита netcat не подходит, так как разрывает пакеты, встречая символ '\n'
Параметры утилиты udpcl следует заменить на свои.
перезагрузка с чтением всех настроек:
udpcl ars '' 192.168.1.250 49162 2
запрос на чтение для каналов №1 и №2:
udpcl gfts '1\n2\n' 192.168.1.250 49162 2

